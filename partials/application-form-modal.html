<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>申込フォーム登録</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* デザイン統一のための基本スタイル */
        body { font-family: 'Noto Sans JP', sans-serif; }
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            vertical-align: middle;
        }
        .icon-sm { font-size: 1.125rem !important; }
        .icon-md { font-size: 1.25rem !important; }

        /* カスタムスクロールバー */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }
        ::-webkit-scrollbar-thumb:hover { background-color: #94a3b8; }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-900 antialiased">
    <div class="min-h-dvh flex flex-col">
      
      <header class="sticky top-0 z-20 bg-white/95 backdrop-blur-sm border-b border-gray-100 px-6 py-4">
        <div class="flex items-center gap-2 mb-1">
            <span class="material-symbols-outlined text-blue-600">assignment_add</span>
            <h1 class="text-lg font-bold text-gray-800 tracking-tight">申込フォーム設定</h1>
        </div>
        <p class="text-xs text-gray-500 ml-8">参加者に登録を求める項目と、その必須/任意の扱いを設定します。</p>
      </header>

      <main class="flex-1 px-6 py-6 space-y-8 pb-32">
        
        <section class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
          <div class="bg-gray-50/50 px-5 py-3 border-b border-gray-100 flex items-center justify-between">
             <h2 class="text-sm font-bold text-gray-700 flex items-center gap-2">
                <span class="material-symbols-outlined icon-md text-gray-400">badge</span>
                基本プロフィール
             </h2>
          </div>
          
          <div class="divide-y divide-gray-100">
            
            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">氏名</div>
                    <div class="text-xs text-gray-400 mt-0.5">システム必須項目</div>
                </div>
                <div>
                    <span class="inline-flex items-center px-2.5 py-1 rounded-md bg-blue-50 text-blue-700 text-xs font-medium border border-blue-100">
                        <span class="material-symbols-outlined text-[14px] mr-1">check_circle</span>
                        必須固定
                    </span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">メールアドレス</div>
                    <div class="text-xs text-gray-400 mt-0.5">連絡用に推奨</div>
                </div>
                <div>
                    <segment-control name="email_req" value="required"></segment-control>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">所属（会社・部署）</div>
                    <div class="text-xs text-gray-400 mt-0.5">名簿作成用</div>
                </div>
                <div>
                    <segment-control name="org_req" value="required"></segment-control>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">社員番号</div>
                    <div class="text-xs text-gray-400 mt-0.5">一意のIDが必要な場合</div>
                </div>
                <div class="flex flex-col sm:flex-row sm:items-center gap-4">
                    <segment-control name="emp_id_req" value="required"></segment-control>
                    
                    <div class="flex items-center gap-2">
                        <label class="text-xs text-gray-500 font-bold whitespace-nowrap">表示名:</label>
                        <input type="text" class="h-8 w-40 rounded border border-gray-300 px-2 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="例）社員ID" value="社員番号">
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">性別</div>
                    <div class="text-xs text-gray-400 mt-0.5">統計情報として利用</div>
                </div>
                <div>
                    <segment-control name="gender_req" value="optional"></segment-control>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">生年月日</div>
                </div>
                <div>
                    <segment-control name="dob_req" value="none"></segment-control>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">自由設定項目</div>
                    <div class="text-xs text-gray-400 mt-0.5">フリーテキスト入力欄</div>
                </div>
                <div class="flex flex-col sm:flex-row sm:items-center gap-4">
                    <segment-control name="free_req" value="none"></segment-control>
                    
                    <div class="flex items-center gap-2">
                        <label class="text-xs text-gray-500 font-bold whitespace-nowrap">質問文:</label>
                        <input type="text" id="free-input" class="h-8 w-48 rounded border border-gray-300 px-2 text-xs focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="例）希望する連絡時間帯" disabled>
                    </div>
                </div>
            </div>

          </div>
        </section>

        <section class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
          <div class="bg-gray-50/50 px-5 py-3 border-b border-gray-100 flex items-center justify-between">
             <h2 class="text-sm font-bold text-gray-700 flex items-center gap-2">
                <span class="material-symbols-outlined icon-md text-gray-400">tune</span>
                追加オプション
             </h2>
          </div>
          
          <div class="divide-y divide-gray-100">
            
            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-center gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div>
                    <div class="text-sm font-bold text-gray-800">上司承認プロセス</div>
                    <div class="text-xs text-gray-400 mt-0.5">申込時に上司アドレスを入力</div>
                </div>
                <div>
                    <custom-toggle checked="false" label-on="有効" label-off="無効"></custom-toggle>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] items-start gap-4 p-5 hover:bg-gray-50/50 transition-colors">
                <div class="mt-1">
                    <div class="text-sm font-bold text-gray-800">事前アンケート</div>
                    <div class="text-xs text-gray-400 mt-0.5">申込完了後に回答を求める</div>
                </div>
                <div class="w-full">
                    <div class="mb-4">
                        <custom-toggle id="survey-toggle" checked="true" label-on="あり" label-off="なし"></custom-toggle>
                    </div>

                    <div id="survey-area" class="rounded-xl border border-dashed border-blue-200 bg-blue-50/50 p-4 transition-all duration-300 overflow-hidden">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="material-symbols-outlined text-blue-500 icon-md">playlist_add_check</span>
                            <span class="text-xs font-bold text-blue-700">アンケート設定エリア</span>
                        </div>
                        <div class="space-y-2">
                            <div class="bg-white p-3 rounded border border-blue-100 shadow-sm flex items-center gap-3 opacity-60">
                                <span class="material-symbols-outlined text-gray-300">drag_indicator</span>
                                <div class="h-2 w-32 bg-gray-100 rounded"></div>
                                <div class="h-2 w-16 bg-gray-100 rounded ml-auto"></div>
                            </div>
                            <div class="text-center py-2">
                                <button class="text-xs text-blue-600 font-bold hover:underline">＋ 質問を追加する</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

          </div>
        </section>

      </main>

      <div class="fixed bottom-0 inset-x-0 z-50 bg-white border-t border-gray-200 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
        <div class="mx-auto px-6 py-4 flex items-center justify-end gap-3">
          <button class="px-5 py-2.5 rounded-lg border border-gray-300 bg-white text-sm font-bold text-gray-600 hover:bg-gray-50 hover:text-gray-800 transition-colors">
            キャンセル
          </button>
          <button class="px-6 py-2.5 rounded-lg bg-blue-600 text-white text-sm font-bold hover:bg-blue-700 shadow-sm hover:shadow active:scale-[0.98] transition-all flex items-center gap-2">
            <span>保存して次へ</span>
            <span class="material-symbols-outlined icon-sm">arrow_forward</span>
          </button>
        </div>
      </div>
    </div>

    <script src="../js/components/toggle-switch.js"></script>
    <script src="../js/components/segment-control.js"></script>
    
    <script>
        // アンケートエリアの表示切り替えロジック
        const surveyToggle = document.getElementById('survey-toggle');
        const surveyArea = document.getElementById('survey-area');
        
        if (surveyToggle) {
            surveyToggle.addEventListener('change', (e) => {
                const isOn = e.detail.checked;
                if (isOn) {
                    surveyArea.classList.remove('hidden', 'opacity-0', 'h-0', 'p-0', 'border-0');
                    surveyArea.classList.add('p-4', 'border', 'opacity-100', 'h-auto');
                } else {
                    surveyArea.classList.add('hidden', 'opacity-0', 'h-0', 'p-0', 'border-0');
                    surveyArea.classList.remove('p-4', 'border', 'opacity-100', 'h-auto');
                }
            });
        }
        
        // 自由入力項目の活性制御
        const freeControl = document.querySelector('segment-control[name="free_req"]');
        const freeInput = document.getElementById('free-input');
        
        if (freeControl && freeInput) {
            freeControl.addEventListener('change', (e) => {
                const val = e.detail.value;
                freeInput.disabled = (val === 'none');
                
                if(!freeInput.disabled) {
                    freeInput.focus();
                }
            });
        }
    </script>
  </body>
</html>