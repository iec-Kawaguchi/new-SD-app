<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>New SD App</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.css">
        <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>
        <script type="module" src="../js/modules/dashboard/index.js"></script>
        <script src="./js/role-visibility.js" defer></script>
        <script src="./js/mock-ui.js" defer></script>
        <style>
            body {
                font-family: "游ゴシック体", "Yu Gothic", "游ゴシック", YuGothic, sans-serif;
            }
        </style>
    </head>
    <body class="bg-gray-100 min-h-screen flex flex-col">
        <div id="app-header"></div>
        <main class="flex flex-1">
            <div id="app-sidebar"></div>
            <div class="p-10 flex-1 bg-gray-200">
                <div class="flex justify-between items-center mb-4">
                    <div class="text-2xl font-bold text-gray-700">コース一覧</div>
                </div>
                <div class="bg-white w-full  rounded-xl flex flex-col mx-auto shadow-md p-4">
                    <div class="p-4 flex items-center justify-between">
                        <input type="text" class="border p-2 px-4 w-96 rounded-full" placeholder="コース名で検索...">
                        <div id="btnOpenModal"
                            class="group bg-white text-blue-500 px-4 py-2 rounded-md ml-4 hover:bg-blue-500 hover:text-white flex items-center overflow-hidden transition-all duration-300 ease-in-out cursor-pointer">
                            <span class="material-symbols-outlined text-lg">add</span>
                            <span class="opacity-0 max-w-0 group-hover:opacity-100 group-hover:max-w-[100px] transition-all duration-300 ease-in-out whitespace-nowrap">
                                <span class="ml-2">新規登録</span>
                            </span>
                        </div>
                    </div>
                    <div class="p-4 w-full">
                        <table class="w-full max-w-6xl table-auto text-left text-gray-700">
                            <tr>
                                <th class="border-b px-4 py-2" data-visible-for="iec">団体</th>
                                <th class="border-b px-4 py-2">コース名</th>
                                <th class="border-b px-4 py-2">団体管理CD</th>
                                <th class="border-b px-4 py-2 text-center">HTML</th>
                                <th class="border-b px-4 py-2 text-center">版下</th>
                                <th class="border-b px-4 py-2 text-center">オプション</th>
                                <th class="border-b px-4 py-2 text-center">最終更新日</th>
                            </tr>
                            <tr class="hover:bg-gray-100 cursor-pointer" data-visible-for="iec,supplier">
                                <td class="border-b px-4 py-2" data-visible-for="iec">産業能率大学</td>
                                <td class="border-b px-4 py-2">すごいマナーコース</td>
                                <td class="border-b px-4 py-2">SN98353325-2</td>
                                <td class="border-b px-4 py-2 text-center">●</td>
                                <td class="border-b px-4 py-2 text-center">●</td>
                                <td class="border-b px-4 py-2 text-center">2</td>
                                <td class="border-b px-4 py-2 text-center">2024/10/22</td>
                            </tr>
                            <tr class="hover:bg-gray-100 cursor-pointer" data-visible-for="iec,supplier">
                                <td class="border-b px-4 py-2" data-visible-for="iec">産業能率大学</td>
                                <td class="border-b px-4 py-2">やばいマナーコース</td>
                                <td class="border-b px-4 py-2">SN98353361-1</td>
                                <td class="border-b px-4 py-2 text-center">●</td>
                                <td class="border-b px-4 py-2 text-center">-</td>
                                <td class="border-b px-4 py-2 text-center">1</td>
                                <td class="border-b px-4 py-2 text-center">2025/11/15</td>
                            </tr>
                            <tr class="hover:bg-gray-100 cursor-pointer" data-visible-for="iec">
                                <td class="border-b px-4 py-2" data-visible-for="iec">JMAM</td>
                                <td class="border-b px-4 py-2">あたまがよくなる講座</td>
                                <td class="border-b px-4 py-2">JM200-1212</td>
                                <td class="border-b px-4 py-2 text-center">●</td>
                                <td class="border-b px-4 py-2 text-center">●</td>
                                <td class="border-b px-4 py-2 text-center">2</td>
                                <td class="border-b px-4 py-2 text-center">2020/07/02</td>
                            </tr>
                            <tr class="hover:bg-gray-100 cursor-pointer" data-visible-for="iec">
                                <td class="border-b px-4 py-2" data-visible-for="iec">JMAM</td>
                                <td class="border-b px-4 py-2">あたまがよくなる講座</td>
                                <td class="border-b px-4 py-2">JM200-1212</td>
                                <td class="border-b px-4 py-2 text-center">●</td>
                                <td class="border-b px-4 py-2 text-center">●</td>
                                <td class="border-b px-4 py-2 text-center">1</td>
                                <td class="border-b px-4 py-2 text-center">2020/07/02</td>
                            </tr>
                        </table>
                        <div class="bg-yellow-100 mt-4 p-3 rounded-md flex flex-col text-yellow-800">
                            <strong>川口メモとか解説</strong>
                            ILMS Desktopにおける他団体フライヤーマスターと同じ仕組みの想定。ログインしてるユーザーに紐付く団体のものしか表示さえれないが、IECは全部見れる。
                            <br>WEBから他団体が登録OKにし、IEC側で承認処理をする？(要検討)
                        </div>
                    </div>
                    
                </div>
              
        </main>

        <!-- modal -->
        <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white rounded-lg shadow-lg w-1/3">
                <div class="p-4 border-b">
                    <h2 class="text-xl font-bold text-gray-700">コース新規登録</h2>
                </div>
                <div class="p-4">
                    <!-- モーダルの内容をここに追加 -->
                    <p>コース新規登録フォームをここに実装</p>
                </div>
                <div class="p-4 border-t flex justify-end">
                    <button id="btnCloseModal" class="bg-gray-500 text-white px-4 py-2 rounded-full hover:bg-gray-600">閉じる</button>
                </div>
            </div>
        </div>
    </body>
</html>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    // 初期ロールやブランド名・ユーザー名は自由に
    MockUI.injectHeader('#app-header', {
      userName: 'Test User',
      brand: 'New SD App',
      initialRole: 'iec', // 初回roleが未指定ならiecをセット
    });
    MockUI.injectSidebar('#app-sidebar');

    // サイドバー挿入直後に data-visible-for を反映
    RoleMock.applyRoleVisibility();
  });

  const btnOpenModal = document.getElementById('btnOpenModal');
  btnOpenModal.addEventListener('click', () => {
    document.getElementById('modal').classList.remove('hidden');
  });

  const btnCloseModal = document.getElementById('btnCloseModal');
  btnCloseModal.addEventListener('click', () => {
    document.getElementById('modal').classList.add('hidden');
  });
</script>